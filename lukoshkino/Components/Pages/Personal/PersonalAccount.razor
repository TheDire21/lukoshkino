@page "/account"
@layout MainLayout
@attribute [Authorize(Roles = "Admin, User")]

@using System.ComponentModel.DataAnnotations
@using Microsoft.AspNetCore.Authentication
@using Microsoft.AspNetCore.Identity

@inject UserManager<ApplicationUser> _userManager


<PageTitle>Личный кабинет-Из лукошкино с любовью</PageTitle>
<div class="Top">
    <div class="account">
        <div class="top_account">
            <div class="menu">
                <h3>ПРОФИЛЬ</h3>
                @if (HttpContext.User.IsInRole("Admin"))
                {
                    <NavLink href="/admin/edit-goods" class="menu_btn">
                        <button>Вход в АдминПанель</button>
                    </NavLink>
                }

                <NavLink href="/logout" class="menu_btn">
                    <button>Выйти из аккаунта</button>
                </NavLink>

            </div>
        </div>
        <div class="laine"></div>
        <div class="body_account">
            <div class="info">
                <PersonalData User=@_userManager.GetUserAsync(HttpContext.User).Result></PersonalData>
            </div>
            
        </div>
        
    </div>
    <div class="futor1"></div>
</div>

@code{
    [CascadingParameter]
    private HttpContext HttpContext { get; set; } = default!;

  

}